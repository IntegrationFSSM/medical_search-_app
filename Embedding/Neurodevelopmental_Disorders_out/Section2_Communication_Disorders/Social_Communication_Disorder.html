<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Évaluation Trouble de la Communication Sociale – DSM-5-TR</title>
  <style>
  .top-bar {
    display: flex;
    align-items: center;
    background-color: #dff0dc;
    padding: 10px 20px;
    margin-bottom: 30px;
    border-radius: 6px;
  }
  .titre-centre {
    flex: 1;
    text-align: center;
  }
  .titre-centre h1 {
    margin: 0;
    font-size: 28px;
    color: #3d7a3b;
  }
  .titre-centre h2 {
    margin: 0;
    font-size: 16px;
    color: #3d7a3b;
  }
  .section-title {
    font-size: 24px;
    font-weight: bold;
    color: #3d7a3b;
    margin: 30px 0 20px 0;
    padding-bottom: 10px;
    border-bottom: 3px solid #8cc63f;
  }

    body { font-family: 'Segoe UI', sans-serif; max-width: 960px; margin: auto; padding: 20px; background: #f5fff8; color: #2e3b2c; }
    fieldset { border: 2px solid #8cc63f; padding: 15px; margin-bottom: 20px; background: #ffffff; }
    legend { font-weight: bold; color: #3d7a3b; }
    label { display: block; margin-bottom: 5px; }
    .hidden {
      display: none;
    }
    .boutons-validation {
      display: flex;
      gap: 15px;
      margin: 40px 0 20px 0;
      justify-content: center;
    }
    .btn-valide {
      background-color: #28a745;
      color: white;
      border: none;
      padding: 15px 40px;
      font-size: 16px;
      font-weight: bold;
      border-radius: 6px;
      cursor: pointer;
      flex: 1;
      max-width: 300px;
    }
    .btn-valide:hover {
      background-color: #218838;
    }
    .btn-non-valide {
      background-color: #dc3545;
      color: white;
      border: none;
      padding: 15px 40px;
      font-size: 16px;
      font-weight: bold;
      border-radius: 6px;
      cursor: pointer;
      flex: 1;
      max-width: 300px;
    }
    .btn-non-valide:hover {
      background-color: #c82333;
    }
    .subtitle {
      font-size: 0.9em;
      color: #666;
      font-style: italic;
    }
  </style>

</head>
<body>

<div class="top-bar">
  <div class="titre-centre">
    <h1>CLINIQUE LA VALLÉE</h1>
    <h2>Évaluation du Trouble de la Communication Sociale (Pragmatique) – DSM-5-TR</h2>
  </div>
</div>

<h2 class="section-title">Les critères diagnostiques</h2>

<form id="formulaire">

<!-- Critère A -->
<fieldset id="critereA">
  <legend>Critère A – Difficultés persistantes dans l'utilisation sociale de la communication</legend>
  <p class="subtitle">Difficultés persistantes dans l'utilisation sociale de la communication verbale et non verbale manifestées par TOUS les éléments suivants</p>
  <label><input type="checkbox" name="critereA" value="1. Déficits dans utilisation communication pour buts sociaux (saluer, partager informations)"/> 1. Déficits dans l'utilisation de la communication pour buts sociaux (saluer, partager informations, de manière appropriée au contexte)</label>
  <label><input type="checkbox" name="critereA" value="2. Altération capacité à changer communication selon contexte ou besoins interlocuteur"/> 2. Altération de la capacité à changer la communication selon contexte ou besoins de l'interlocuteur (parler différemment en classe vs terrain de jeu, à enfant vs adulte, éviter langage trop formel)</label>
  <label><input type="checkbox" name="critereA" value="3. Difficultés à suivre règles de conversation et narration"/> 3. Difficultés à suivre les règles de conversation et narration (prendre tours de parole, reformuler quand incompris, utiliser signaux verbaux/non verbaux pour réguler interaction)</label>
  <label><input type="checkbox" name="critereA" value="4. Difficultés à comprendre ce qui n'est pas explicitement dit et significations non littérales/ambiguës"/> 4. Difficultés à comprendre ce qui n'est pas explicitement dit et significations non littérales/ambiguës (inférences, idiomes, humour, métaphores, significations multiples)</label>
</fieldset>

<!-- Critère B -->
<fieldset id="critereB">
  <legend>Critère B – Limitations fonctionnelles résultant des déficits</legend>
  <p class="subtitle">Les déficits résultent en limitations fonctionnelles dans la communication efficace, participation sociale, relations sociales, réussite académique ou performance professionnelle, individuellement ou en combinaison</p>
  <label><input type="checkbox" name="critereB" value="Limitations dans communication efficace"/> Limitations dans la communication efficace</label>
  <label><input type="checkbox" name="critereB" value="Limitations dans participation sociale"/> Limitations dans la participation sociale</label>
  <label><input type="checkbox" name="critereB" value="Limitations dans relations sociales"/> Limitations dans les relations sociales</label>
  <label><input type="checkbox" name="critereB" value="Limitations dans réussite académique"/> Limitations dans la réussite académique</label>
  <label><input type="checkbox" name="critereB" value="Limitations dans performance professionnelle"/> Limitations dans la performance professionnelle</label>
</fieldset>

<!-- Critère C -->
<fieldset id="critereC">
  <legend>Critère C – Début précoce</legend>
  <p class="subtitle">Le début des symptômes se situe dans la période développementale précoce (mais les déficits peuvent ne pas se manifester pleinement jusqu'à ce que les demandes de communication sociale excèdent les capacités limitées)</p>
  <label><input type="checkbox" name="critereC" value="Début des symptômes dans période développementale précoce"/> Début des symptômes dans la période développementale précoce</label>
</fieldset>

<!-- Critère D -->
<fieldset id="critereD">
  <legend>Critère D – Exclusion d'autres causes</legend>
  <p class="subtitle">Les symptômes ne sont pas attribuables à une autre condition médicale ou neurologique ou à faibles capacités dans les domaines de structure de mots et grammaire, et ne sont pas mieux expliqués par trouble du spectre de l'autisme, trouble du développement intellectuel (déficience intellectuelle), retard global du développement, ou autre trouble mental</p>
  <label><input type="checkbox" name="critereD" value="Non attribuables à autre condition médicale ou neurologique"/> Non attribuables à autre condition médicale ou neurologique</label>
  <label><input type="checkbox" name="critereD" value="Non attribuables à faibles capacités en structure mots et grammaire"/> Non attribuables à faibles capacités dans domaines de structure de mots et grammaire</label>
  <label><input type="checkbox" name="critereD" value="Non mieux expliqués par trouble spectre autisme"/> Non mieux expliqués par trouble du spectre de l'autisme</label>
  <label><input type="checkbox" name="critereD" value="Non mieux expliqués par trouble développement intellectuel ou retard global"/> Non mieux expliqués par trouble du développement intellectuel (déficience intellectuelle) ou retard global du développement</label>
  <label><input type="checkbox" name="critereD" value="Non mieux expliqués par autre trouble mental"/> Non mieux expliqués par autre trouble mental</label>
</fieldset>

</form>

<h2 class="section-title" id="titre-diagnostic" style="display: none;">Diagnostic différentiel</h2>

<form id="formulaire-diff" style="display: none;">

<!-- Diagnostic différentiel -->
<fieldset id="diagnostic-differentiel">
  <legend>Diagnostic différentiel</legend>
  <p class="subtitle">Cocher les troubles à différencier</p>
  
  <label><input type="checkbox" name="diff_autisme" value="Autisme (TSA) – Se distingue par la présence d'intérêts ou de comportements restreints et répétitifs (critère B) absents dans le trouble de la communication sociale"/> Autisme (TSA) – Présence d'intérêts ou de comportements restreints et répétitifs (critère B) absente ici, d'où nécessité d'une anamnèse détaillée</label>
  
  <label><input type="checkbox" name="diff_tdah" value="TDAH – Les déficits primaires d'attention et d'hyperactivité peuvent altérer la communication sociale et expliquer les limitations fonctionnelles"/> TDAH – Les déficits primaires d'attention/hyperactivité peuvent expliquer les difficultés de communication sociale et les limitations fonctionnelles</label>
  
  <label><input type="checkbox" name="diff_anxiete_sociale" value="Trouble d'anxiété sociale – Les compétences de communication ont été acquises mais ne sont pas utilisées en raison de l'anxiété ou de la peur des interactions"/> Trouble d'anxiété sociale – Les compétences ont été acquises mais ne sont pas utilisées à cause de l'anxiété ou de la détresse sociale</label>
  
  <label><input type="checkbox" name="diff_deficience" value="Déficience intellectuelle / retard global – Poser ce diagnostic séparé seulement si les déficits pragmatiques excèdent ce que l'on attend du niveau intellectuel"/> Déficience intellectuelle / retard global – Diagnostic séparé seulement si les déficits de communication sociale excèdent les limitations intellectuelles</label>
  
</fieldset>

</form>

<h2 class="section-title" id="titre-comorbidite" style="display: none;">Comorbidité</h2>

<form id="formulaire-comorb" style="display: none;">

<fieldset id="comorbidite">
  <legend>Comorbidité</legend>
  <p class="subtitle">Troubles fréquemment associés</p>

  <label><input type="checkbox" name="comorb_adhd" value="Trouble déficit de l'attention/hyperactivité (TDAH)"/> Trouble déficit de l'attention/hyperactivité (TDAH)</label>
  <label><input type="checkbox" name="comorb_sld" value="Trouble spécifique des apprentissages (lecture, écriture, mathématiques)"/> Troubles spécifiques des apprentissages (lecture, écriture, mathématiques)</label>
  <label><input type="checkbox" name="comorb_language" value="Trouble du langage expressif/réceptif concomitant"/> Troubles du langage expressif/réceptif concomitants</label>
  <label><input type="checkbox" name="comorb_speech" value="Trouble des sons de la parole ou antécédents familiaux de troubles de la parole"/> Trouble des sons de la parole / antécédents familiaux de troubles de la parole</label>
  <label><input type="checkbox" name="comorb_anxiete" value="Troubles anxieux ou de l'humeur liés aux interactions sociales"/> Troubles anxieux ou de l'humeur liés aux interactions sociales</label>
  <label><input type="checkbox" name="comorb_tic" value="Autres troubles neurodéveloppementaux (tics, coordination, planification motrice)"/> Autres troubles neurodéveloppementaux (tics, coordination, planification motrice)</label>
</fieldset>

</form>

<div class="boutons-validation">
  <button type="button" class="btn-valide" onclick="validerFormulaireLocal(event)">✔️ VALIDER</button>
  <button type="button" class="btn-non-valide" onclick="nonValiderFormulaireLocal(event)">✘ NON VALIDER</button>
</div>

<script>
(function() {
  'use strict';
  let etapeNonValide = 0; // 0: rien, 1: diagnostic, 2: comorbidité
  const scrollOptions = { behavior: 'smooth', block: 'start' };

  const showSection = (titre, formulaire) => {
    if (titre) {
      titre.style.display = 'block';
      titre.scrollIntoView(scrollOptions);
    }
    if (formulaire) formulaire.style.display = 'block';
  };

  const hideSection = (titre, formulaire) => {
    if (titre) titre.style.display = 'none';
    if (formulaire) formulaire.style.display = 'none';
  };

  const callGlobal = (fnName) => {
    const candidate = globalThis[fnName];
    if (typeof candidate === 'function') {
      candidate();
    }
  };

  const getSections = () => ({
    titreDiag: document.getElementById('titre-diagnostic'),
    formDiag: document.getElementById('formulaire-diff'),
    titreComorb: document.getElementById('titre-comorbidite'),
    formComorb: document.getElementById('formulaire-comorb')
  });

  globalThis.validerFormulaireLocal = function(event) {
    if (event) {
      event.preventDefault();
      event.stopPropagation();
      event.stopImmediatePropagation();
    }

    etapeNonValide = 0;
    const { titreDiag, formDiag, titreComorb, formComorb } = getSections();
    hideSection(titreDiag, formDiag);
    hideSection(titreComorb, formComorb);
    callGlobal('validerFormulaire');
  };

  globalThis.nonValiderFormulaireLocal = function(event) {
    if (event) {
      event.preventDefault();
      event.stopPropagation();
      event.stopImmediatePropagation();
    }

    const { titreDiag, formDiag, titreComorb, formComorb } = getSections();
    const hasComorbidite = Boolean(titreComorb && formComorb);
    const actions = {
      0: () => {
        showSection(titreDiag, formDiag);
        etapeNonValide = 1;
      },
      1: () => {
        if (hasComorbidite) {
          showSection(titreComorb, formComorb);
          etapeNonValide = 2;
        } else {
          hideSection(titreDiag, formDiag);
          etapeNonValide = 0;
          callGlobal('nonValiderFormulaire');
        }
      },
      2: () => {
        hideSection(titreDiag, formDiag);
        hideSection(titreComorb, formComorb);
        etapeNonValide = 0;
        callGlobal('nonValiderFormulaire');
      }
    };

    (actions[etapeNonValide] || function() {})();
  };
})();
</script>

<script>
(function() {
  if (typeof globalThis.validerFormulaire !== 'function') {
    globalThis.validerFormulaire = function() {
      Swal.fire({icon: 'success', title: 'Validé !', text: 'Formulaire marqué comme VALIDE', timer: 2000, showConfirmButton: false});
    };
  }
  if (typeof globalThis.nonValiderFormulaire !== 'function') {
    globalThis.nonValiderFormulaire = function() {
      Swal.fire({icon: 'warning', title: 'Non validé', text: 'Formulaire marqué comme NON VALIDE', timer: 2000, showConfirmButton: false});
    };
  }
})();
</script>

<footer style="text-align:center; font-size:0.9em; margin-top: 40px; padding-top: 15px; border-top: 1px solid #ccc;">
  <p>CLINIQUE LA VALLÉE – RIAD AL ANDALOUSSE VILLA 39, AV. ABDERRAHIM BOUABID, HAY RIAD 1, Rabat</p>
  <p>Date : 15/10/2025 — <strong style="color:darkred;">DOCUMENT CONFIDENTIEL</strong></p>
</footer>

</body>
</html>
