<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Évaluation Trouble Fétichiste – DSM-5-TR</title>
  <style>
  .top-bar {
    display: flex;
    align-items: center;
    background-color: #dff0dc;
    padding: 10px 20px;
    margin-bottom: 30px;
    border-radius: 6px;
  }
  .titre-centre {
    flex: 1;
    text-align: center;
  }
  .titre-centre h1 {
    margin: 0;
    font-size: 28px;
    color: #3d7a3b;
  }
  .titre-centre h2 {
    margin: 0;
    font-size: 20px;
    color: #3d7a3b;
  }
  .section-title {
    font-size: 24px;
    font-weight: bold;
    color: #3d7a3b;
    margin: 30px 0 20px 0;
    padding-bottom: 10px;
    border-bottom: 3px solid #8cc63f;
  }
    body { font-family: 'Segoe UI', sans-serif; max-width: 960px; margin: auto; padding: 20px; background: #f5fff8; color: #2e3b2c; }
    fieldset { border: 2px solid #8cc63f; padding: 15px; margin-bottom: 20px; background: #ffffff; }
    legend { font-weight: bold; color: #3d7a3b; }
    label { display: block; margin-bottom: 5px; }
    button {
      background-color: #8cc63f;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 4px;
      margin-top: 10px;
      cursor: pointer;
    }
    button:hover { background-color: #76b42f; }
    .hidden { display: none; }
    .boutons-validation {
      display: flex;
      gap: 15px;
      margin: 40px 0 20px 0;
      justify-content: center;
    }
    .btn-valide,
    .btn-non-valide {
      color: white;
      border: none;
      padding: 15px 40px;
      font-size: 16px;
      font-weight: bold;
      border-radius: 6px;
      cursor: pointer;
      flex: 1;
      max-width: 300px;
    }
    .btn-valide {
      background-color: #28a745;
    }
    .btn-valide:hover {
      background-color: #218838;
    }
    .btn-non-valide {
      background-color: #dc3545;
    }
    .btn-non-valide:hover {
      background-color: #c82333;
    }
    .subtitle {
      font-size: 0.9em;
      color: #666;
      font-style: italic;
    }
  </style>

  <!-- SweetAlert2 -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>

<div class="top-bar">
  <div class="titre-centre">
    <h1>CLINIQUE LA VALLÉE</h1>
    <h2>Évaluation du Trouble Fétichiste – DSM-5-TR</h2>
  </div>
</div>

<h2 class="section-title">Les critères diagnostiques</h2>

<form id="formulaire">

<!-- Critère A -->
<fieldset id="critereA">
  <legend>Critère A – Excitation sexuelle récurrente et intense</legend>
  <p class="subtitle">Sur une période d'au moins 6 mois, excitation sexuelle récurrente et intense provenant soit de l'utilisation d'objets inanimés soit d'une focalisation hautement spécifique sur partie(s) du corps non génitale(s), manifestée par fantasmes, impulsions ou comportements (période d'au moins 6 mois requise)</p>
  <label><input type="checkbox" name="critereA" value="Excitation sexuelle récurrente et intense"/> Excitation sexuelle récurrente et intense</label>
  <label><input type="checkbox" name="critereA" value="Provenant utilisation objets inanimés"/> Provenant de l'utilisation d'objets inanimés</label>
  <label><input type="checkbox" name="critereA" value="Provenant focalisation spécifique sur parties corps non génitales"/> Provenant d'une focalisation hautement spécifique sur partie(s) du corps non génitale(s)</label>
  <label><input type="checkbox" name="critereA" value="Manifestée par fantasmes"/> Manifestée par fantasmes</label>
  <label><input type="checkbox" name="critereA" value="Manifestée par impulsions"/> Manifestée par impulsions</label>
  <label><input type="checkbox" name="critereA" value="Manifestée par comportements"/> Manifestée par comportements</label>
  <label><input type="checkbox" name="critereA" value="Période au moins 6 mois"/> Période d'au moins 6 mois</label>
</fieldset>

<!-- Critère B -->
<fieldset id="critereB">
  <legend>Critère B – Détresse ou altération cliniquement significative</legend>
  <p class="subtitle">Les fantasmes, impulsions sexuelles ou comportements causent détresse ou altération cliniquement significative dans le fonctionnement social, professionnel ou autres domaines importants</p>
  <label><input type="checkbox" name="critereB" value="Détresse cliniquement significative"/> Détresse cliniquement significative</label>
  <label><input type="checkbox" name="critereB" value="Altération fonctionnement social"/> Altération dans le fonctionnement social</label>
  <label><input type="checkbox" name="critereB" value="Altération fonctionnement professionnel"/> Altération dans le fonctionnement professionnel</label>
  <label><input type="checkbox" name="critereB" value="Altération autres domaines importants"/> Altération dans autres domaines importants du fonctionnement</label>
</fieldset>

<!-- Critère C -->
<fieldset id="critereC">
  <legend>Critère C – Exclusions</legend>
  <p class="subtitle">Les objets fétiches ne sont pas limités à des articles vestimentaires utilisés dans le travestissement ou à des dispositifs spécifiquement conçus pour stimulation génitale tactile</p>
  <label><input type="checkbox" name="critereC" value="Non limités à articles vestimentaires pour travestissement"/> Non limités à articles vestimentaires utilisés dans le travestissement (comme dans trouble transvestique)</label>
  <label><input type="checkbox" name="critereC" value="Non limités à dispositifs pour stimulation génitale tactile"/> Non limités à dispositifs spécifiquement conçus pour stimulation génitale tactile (ex: vibromasseur)</label>
</fieldset>

<!-- Spécificateurs -->
<fieldset id="specificateurs">
  <legend>Spécificateurs</legend>
  
  <p style="margin-top: 10px;"><strong>Type de fétiche (peut sélectionner plusieurs) :</strong></p>
  <label><input type="checkbox" name="typeFetiche" value="Partie(s) du corps"/> Partie(s) du corps</label>
  <label><input type="checkbox" name="typeFetiche" value="Objet(s) inanimé(s)"/> Objet(s) inanimé(s)</label>
  <label><input type="checkbox" name="typeFetiche" value="Autre"/> Autre</label>
  <p class="subtitle">Note: Combinaisons non mutuellement exclusives d'intérêts fétichistes fréquentes. Individu peut avoir intérêt pour objet inanimé (ex: sous-vêtements) ou partie du corps (ex: pieds, cheveux), ou combinaisons (ex: chaussettes, chaussures et pieds)</p>
  
  <p style="margin-top: 15px;"><strong>Environnement :</strong></p>
  <label><input type="checkbox" name="environnement" value="En environnement contrôlé"/> En environnement contrôlé</label>
  <p class="subtitle">S'applique principalement aux individus vivant en institutions ou autres contextes où opportunités de s'engager dans comportements fétichistes sont restreintes</p>
  
  <p style="margin-top: 15px;"><strong>Rémission :</strong></p>
  <label><input type="checkbox" name="remission" value="En rémission complète"/> En rémission complète (≥5 ans en environnement non contrôlé, sans détresse ni altération)</label>
</fieldset>

</form>

<h2 class="section-title" id="titre-diagnostic" style="display: none;">Diagnostic différentiel</h2>

<form id="formulaire-diff" style="display: none;">

<fieldset>
  <legend>Diagnostic différentiel</legend>
  <label><input type="checkbox" name="diff_diag" value="Trouble transvestique"/> Trouble transvestique</label>
  <label><input type="checkbox" name="diff_diag" value="Utilisation normale d'objets sexuels"/> Utilisation normale d'objets sexuels</label>
  <label><input type="checkbox" name="diff_diag" value="Autres troubles paraphiliques"/> Autres troubles paraphiliques</label>
  <label><input type="checkbox" name="diff_diag" value="Trouble de la personnalité"/> Trouble de la personnalité</label>
</fieldset>

</form>

<h2 class="section-title" id="titre-comorbidite" style="display: none;">Comorbidité</h2>

<form id="formulaire-comorb" style="display: none;">

<fieldset>
  <legend>Comorbidité</legend>
  <label><input type="checkbox" name="comorbidite" value="Autres troubles paraphiliques"/> Autres troubles paraphiliques</label>
  <label><input type="checkbox" name="comorbidite" value="Troubles de l'humeur"/> Troubles de l'humeur</label>
  <label><input type="checkbox" name="comorbidite" value="Troubles anxieux"/> Troubles anxieux</label>
  <label><input type="checkbox" name="comorbidite" value="Dysfonction sexuelle"/> Dysfonction sexuelle</label>
</fieldset>

</form>

<div class="boutons-validation">
  <button type="button" class="btn-valide" onclick="validerFormulaireLocal(event)">✔️ VALIDER</button>
  <button type="button" class="btn-non-valide" onclick="nonValiderFormulaireLocal(event)">✘ NON VALIDER</button>
</div>

<footer style="text-align:center; font-size:0.9em; margin-top: 40px; padding-top: 15px; border-top: 1px solid #ccc;">
  <p>CLINIQUE LA VALLÉE – RIAD AL ANDALOUSSE VILLA 39, AV. ABDERRAHIM BOUABID, HAY RIAD 1, Rabat</p>
  <p>Date : 15/10/2025 — <strong style="color:darkred;">DOCUMENT CONFIDENTIEL</strong></p>
</footer>

<script>
// Gestion locale des boutons pour révéler progressivement Diagnostic différentiel et Comorbidité
(function() {
  'use strict';
  let etapeNonValide = 0; // 0: début, 1: diagnostic affiché, 2: comorbidité affichée

  window.validerFormulaireLocal = function(event) {
    if (event) {
      event.preventDefault();
      event.stopPropagation();
      event.stopImmediatePropagation();
    }

    etapeNonValide = 0;

    const titreDiag = document.getElementById("titre-diagnostic");
    const formDiag = document.getElementById("formulaire-diff");
    const titreComorb = document.getElementById("titre-comorbidite");
    const formComorb = document.getElementById("formulaire-comorb");

    if (titreDiag) titreDiag.style.display = "none";
    if (formDiag) formDiag.style.display = "none";
    if (titreComorb) titreComorb.style.display = "none";
    if (formComorb) formComorb.style.display = "none";

    if (typeof window.validerFormulaire === 'function') {
      window.validerFormulaire();
    }

    return false;
  };

  window.nonValiderFormulaireLocal = function(event) {
    if (event) {
      event.preventDefault();
      event.stopPropagation();
      event.stopImmediatePropagation();
    }

    const titreDiag = document.getElementById("titre-diagnostic");
    const formDiag = document.getElementById("formulaire-diff");
    const titreComorb = document.getElementById("titre-comorbidite");
    const formComorb = document.getElementById("formulaire-comorb");

    if (etapeNonValide === 0) {
      if (titreDiag) {
        titreDiag.style.display = "block";
        titreDiag.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
      if (formDiag) formDiag.style.display = "block";
      etapeNonValide = 1;
      return false;

    } else if (etapeNonValide === 1) {
      if (titreComorb) {
        titreComorb.style.display = "block";
        titreComorb.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
      if (formComorb) formComorb.style.display = "block";
      etapeNonValide = 2;
      return false;

    } else if (etapeNonValide === 2) {
      etapeNonValide = 0;

      if (titreDiag) titreDiag.style.display = "none";
      if (formDiag) formDiag.style.display = "none";
      if (titreComorb) titreComorb.style.display = "none";
      if (formComorb) formComorb.style.display = "none";

      if (typeof window.nonValiderFormulaire === 'function') {
        window.nonValiderFormulaire();
      }

      return false;
    }

    return false;
  };
})();
</script>

<script>
function validerFormulaire() {
  Swal.fire({icon: 'success', title: 'Validé !', text: 'Formulaire marqué comme VALIDE', timer: 2000, showConfirmButton: false});
}

function nonValiderFormulaire() {
  Swal.fire({icon: 'warning', title: 'Non validé', text: 'Formulaire marqué comme NON VALIDE', timer: 2000, showConfirmButton: false});
}
</script>

</body>
</html>

